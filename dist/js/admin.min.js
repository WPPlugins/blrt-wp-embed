window.blrt_wp_admin_js_loaded=!0,jQuery(document).ready(function(l){function e(){if(l(".blrt-wp-url-single").length>=20)alert("Max Blrt for a gallery is 20.");else{var e=a.find(".container-add-new-gallery .spinner"),s=t.val();if(""!=s){var c=s.indexOf("/blrt/");if(c<0)alert("Please ensure you are using an individual Blrt link, not a Blrt Conversation link.");else{c+="/blrt/".length;var o=s.substr(c,10);e.css("visibility","visible"),l.ajax({method:"GET",url:"https://m.blrt.co/blrt/"+o+".json",dataType:"jsonp",crossDomain:!0,success:function(a){a.success?(console.log("success"),n.push(a.data),n[n.length-1].id=o,i.append('<li class="blrt-wp-url-single">    <a class="blrt-title-link blrt-link" href="https://e.blrt.com/embed/blrt/'+o+'" target="_blank"><h4>'+a.data.title+'</h4></a><span class="dashicons dashicons-trash"></span><span class="dashicons dashicons-arrow-up-alt"></span><span class="dashicons dashicons-arrow-down-alt"></span>    <br/>    <p class="fallback-section">        URL: <input class="blrt-url" type="text" value="https://e.blrt.com/embed/blrt/'+o+'" readonly/> <a class="fallback-link" href="">Add fallback video</a>        <span class="fallback-field">            <input type="text" name="fallback_link" class="fallback-input"><button class="fallback-add">Save</button><button class="fallback-cancel">Cancel</button>        </span>    </p></li>'),l(t).val(""),r.text("Blrt added.")):alert("Please ensure you are using an individual Blrt link, not a Blrt Conversation link."),e.css("visibility","hidden")},error:function(){alert("Fail to query data"),e.css("visibility","hidden")}})}}}}var a=l(".blrt-embed-plugin"),t=a.find("#blrt-embed-link-input"),n=[],i=a.find("#blrt-embed-url-placeholder"),r=a.find(".message-add-new-link"),s=a.find(".button-add-new-link"),c=a.find('input[name="publish"]');l('input[name="master-checkbox"]').click(function(){l(this).is(":checked")?l('input[name="checkbox"]').attr("checked",!0):l('input[name="checkbox"]').attr("checked",!1)}),l("#blrt-embed-url-placeholder").sortable();var o=a.find('#blrt-embed-url-placeholder input[name="url"]');s.on("click",e),c.on("click",function(e){if(l("body").hasClass("blrt_page_blrt-add-gallery"))if(""==l('.blrt-embed-plugin > form input[name="name"]').val())e.preventDefault(),alert("Please check that you have added a name to this gallery");else{var a="",t=i.find(".blrt-wp-url-single .blrt-link");console.log(t);for(var n=i.find(".blrt-wp-url-single h4"),r=i.find(".blrt-wp-url-single .fallback-link"),s=0;s<t.length;s++)a+=l(t[s]).attr("href")+"+"+l(n[s]).text()+"+"+l(r[s]).attr("href")+",";o.val(a)}}),a.on("click",".dashicons-trash",function(e){if(!confirm("Are you sure you want to remove this Blrt from the gallery?"))return e.preventDefault(),!1;l(e.target).closest("li").remove()}),a.on("click",".trash",function(l){return!!confirm("Are you sure you want to delete this Blrt gallery?")||(l.preventDefault(),!1)}),a.on("click",".fallback-link",function(e){e.preventDefault(),l(e.originalEvent.target).parent().find(".fallback-field").addClass("active")}),a.on("click",".fallback-add",function(e){e.preventDefault();var a=l(e.originalEvent.target).parent().find('input[name="fallback_link"]').val(),t=l(e.originalEvent.target).closest(".blrt-wp-url-single");""!=a?(t.find(".fallback-link").attr("href",a).text("Edit Fallback video"),0==t.find(".fallback-remove").length&&l('<button class="fallback-remove">Remove</button>').insertBefore(t.find(".fallback-cancel"))):(t.find(".fallback-remove").remove(),t.find(".fallback-link").attr("href",a).text("Add fallback video")),t.find(".fallback-field").removeClass("active")}),a.on("click",".fallback-remove",function(e){e.preventDefault();var a=l(e.originalEvent.target).parent().find('input[name="fallback_link"]').val(""),t=l(e.originalEvent.target).closest(".blrt-wp-url-single");t.find(".fallback-remove").remove(),t.find(".fallback-link").attr("href",a).text("Add fallback video"),t.find(".fallback-field").removeClass("active")}),a.on("click",".fallback-cancel",function(e){e.preventDefault(),l(e.originalEvent.target).closest(".blrt-wp-url-single").find(".fallback-field").removeClass("active")}),a.on("click",".dashicons-arrow-down-alt",function(e){var a=l(e.originalEvent.target).closest(".blrt-wp-url-single");a.not(":last-child")&&a.next().after(a)}),a.on("click",".dashicons-arrow-up-alt",function(e){var a=l(e.originalEvent.target).closest(".blrt-wp-url-single");a.not(":first-child")&&a.prev().before(a)}),a.on("focus",".blrt-url, .fallback-input, #shortcode-output",function(e){var a=l(this);a.select(),a.mouseup(function(){return a.unbind("mouseup"),!1})});var d=!1,u=!1,f=!1,b=!1;a.on("change","#shortcode-builder input",function(e){var a=l(this);"slider-position"!=a.attr("name")||d?"gallery-size"!=a.attr("name")||u?"gallery-skin"!=a.attr("name")||f?"mobile-view"!=a.attr("name")||b||(b=!0):f=!0:u=!0:d=!0;var t="[blrt-gallery";t+=' id="'+l("#gallery-id").val()+'"',d&&(t+=' position="'+l('input[name="slider-position"]:checked').val()+'"'),u&&(t+=' size="'+l('input[name="gallery-size"]:checked').val()+'"'),f&&(t+=' skin="'+l('input[name="gallery-skin"]:checked').val()+'"'),b&&(t+=' mobile="'+l('input[name="mobile-view"]:checked').val()+'"'),t+="]",l("#shortcode-output").text(t)})});
//# sourceMappingURL=admin.min.js.map
